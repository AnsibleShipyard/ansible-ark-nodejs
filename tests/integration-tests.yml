---
#
# integration-tests.yml
#

- hosts: all
  sudo: True
  vars:
    nginx_daemon: "/usr/local/nginx/sbin/nginx"
    nginx_conf_location: "/etc/nginx/nginx.conf"
  tasks:
    # Tests
    - name: Check Launch page is up
      shell: curl -I --stderr /dev/null http://localhost:2368 | head -1 | cut -d' ' -f2
      register: curl_output
    - debug: msg="NodeJS App was installed in {{curl_output.stdout}}"
    - fail: msg="NodeJS App not found, tests failed."
      when: curl_output.stdout != "200"
